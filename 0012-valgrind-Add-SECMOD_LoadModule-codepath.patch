From 19c8e797d092e17f2882d249d5446728a76db050 Mon Sep 17 00:00:00 2001
From: Peter Jones <pjones@redhat.com>
Date: Wed, 17 Oct 2012 14:29:30 -0400
Subject: [PATCH 12/32] [valgrind] Add SECMOD_LoadModule codepath.

This is called once when we initialize the database.

Signed-off-by: Peter Jones <pjones@redhat.com>
---
 src/valgrind.supp | 31 +++++++++++++++++++++++++++++++
 1 file changed, 31 insertions(+)

diff --git a/src/valgrind.supp b/src/valgrind.supp
index 62934e8..783bdad 100644
--- a/src/valgrind.supp
+++ b/src/valgrind.supp
@@ -1527,3 +1527,34 @@
    fun:handle_events
    fun:daemonize
 }
+{
+   <insert_a_suppression_name_here>
+   Memcheck:Leak
+   fun:_Znwm
+   obj:*
+   fun:secmod_ModuleInit
+   fun:secmod_LoadPKCS11Module
+   fun:SECMOD_LoadModule
+   fun:SECMOD_LoadModule
+   fun:nss_InitModules
+   fun:nss_Init
+   fun:NSS_Init
+   fun:daemonize
+   fun:main
+}
+{
+   <insert_a_suppression_name_here>
+   Memcheck:Leak
+   fun:malloc
+   obj:*
+   obj:*
+   obj:*
+   fun:secmod_ModuleInit
+   fun:secmod_LoadPKCS11Module
+   fun:SECMOD_LoadModule
+   fun:SECMOD_LoadModule
+   fun:nss_InitModules
+   fun:nss_Init
+   fun:NSS_Init
+   fun:daemonize
+}
-- 
1.7.12.1

